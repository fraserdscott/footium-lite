var Qe=Object.defineProperty;var Te=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var ge=(i,e,t)=>e in i?Qe(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,G=(i,e)=>{for(var t in e||(e={}))Je.call(e,t)&&ge(i,t,e[t]);if(Te)for(var t of Te(e))Xe.call(e,t)&&ge(i,t,e[t]);return i};import{S as $e,i as Ie,s as Ee,e as P,N as le,j as N,t as v,c as B,a as E,O as oe,d,l as q,g as w,b as h,f as y,G as b,P as z,K as g,h as H,F as pe,H as de,I as me,J as ye,p as O,n as C,T as Ze,Q as et,a2 as tt,a3 as nt,a4 as st,a5 as Me,E as Pe,a6 as it,D as at,a7 as rt,a8 as lt,k as A,m as Y,o as Q,M as te,Y as Be,v as R,w as V,x as W,A as j,R as he,L as ot,a9 as ct,aa as ut,ab as _e,ac as ft,ad as De,ae as pt,af as dt,ag as mt,C as yt}from"./vendor-590ce743.js";import{b as Oe,f as ht,c as ne,d as Ce,l as _t,e as se,w as Le,h as bt}from"./config-44f549ec.js";import{N as X}from"./NavButton-604f466e.js";import{b as J}from"./paths-28a87002.js";import{n as Ne}from"./notifications-c0e68bde.js";const{window:kt}=nt,vt=i=>({}),qe=i=>({});function Ae(i){let e,t,n,s,l,r,o,a;return{c(){e=P("div"),t=le("svg"),n=le("path"),s=N(),l=P("span"),r=v("(Esc)"),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=E(e);t=oe(u,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var p=E(t);n=oe(p,"path",{d:!0}),E(n).forEach(d),p.forEach(d),s=q(u),l=B(u,"SPAN",{class:!0});var m=E(l);r=w(m,"(Esc)"),m.forEach(d),u.forEach(d),this.h()},h(){h(n,"d","M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"),h(t,"class","fill-current text-white"),h(t,"xmlns","http://www.w3.org/2000/svg"),h(t,"width","18"),h(t,"height","18"),h(t,"viewBox","0 0 18 18"),h(l,"class","text-sm"),h(e,"class","modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-sm")},m(c,u){y(c,e,u),b(e,t),b(t,n),b(e,s),b(e,l),b(l,r),o||(a=z(e,"click",i[4]),o=!0)},p:g,d(c){c&&d(e),o=!1,a()}}}function Se(i){let e,t;return{c(){e=P("p"),t=v(i[2]),this.h()},l(n){e=B(n,"P",{class:!0});var s=E(e);t=w(s,i[2]),s.forEach(d),this.h()},h(){h(e,"class","text-2xl font-bold")},m(n,s){y(n,e,s),b(e,t)},p(n,s){s&4&&H(t,n[2])},d(n){n&&d(e)}}}function Ue(i){let e,t,n,s,l;return{c(){e=P("div"),t=le("svg"),n=le("path"),this.h()},l(r){e=B(r,"DIV",{class:!0});var o=E(e);t=oe(o,"svg",{class:!0,xmlns:!0,width:!0,height:!0,viewBox:!0});var a=E(t);n=oe(a,"path",{d:!0}),E(n).forEach(d),a.forEach(d),o.forEach(d),this.h()},h(){h(n,"d","M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"),h(t,"class","fill-current text-black"),h(t,"xmlns","http://www.w3.org/2000/svg"),h(t,"width","18"),h(t,"height","18"),h(t,"viewBox","0 0 18 18"),h(e,"class","modal-close cursor-pointer z-50")},m(r,o){y(r,e,o),b(e,t),b(t,n),s||(l=z(e,"click",i[4]),s=!0)},p:g,d(r){r&&d(e),s=!1,l()}}}function wt(i){let e,t,n,s,l,r,o,a,c,u,p,m,k,$,f=i[0]&&Ae(i),_=i[2]&&Se(i),D=i[1]&&Ue(i);const S=i[8].default,T=pe(S,i,i[7],null),F=i[8].footer,U=pe(F,i,i[7],qe);return{c(){e=P("div"),t=P("div"),n=N(),s=P("div"),f&&f.c(),l=N(),r=P("div"),o=P("div"),_&&_.c(),a=N(),D&&D.c(),c=N(),T&&T.c(),u=N(),p=P("div"),U&&U.c(),this.h()},l(I){e=B(I,"DIV",{class:!0});var L=E(e);t=B(L,"DIV",{class:!0}),E(t).forEach(d),n=q(L),s=B(L,"DIV",{class:!0});var M=E(s);f&&f.l(M),l=q(M),r=B(M,"DIV",{class:!0});var x=E(r);o=B(x,"DIV",{class:!0});var ee=E(o);_&&_.l(ee),a=q(ee),D&&D.l(ee),ee.forEach(d),c=q(x),T&&T.l(x),u=q(x),p=B(x,"DIV",{class:!0});var we=E(p);U&&U.l(we),we.forEach(d),x.forEach(d),M.forEach(d),L.forEach(d),this.h()},h(){h(t,"class","absolute w-full h-full bg-gray-900 opacity-80"),h(o,"class","flex justify-between items-center"),h(p,"class","flex justify-end pt-2"),h(r,"class","modal-content py-4 text-left px-6"),h(s,"class","absolute border-2 w-11/12 md:max-w-md mx-auto overflow-y-auto max-h-screen dark:bg-black dark:border-2 dark:border-gray-800 bg-white"),h(e,"class","z-50 fixed w-full h-full top-0 left-0 flex items-center justify-center text-black dark:text-white")},m(I,L){y(I,e,L),b(e,t),b(e,n),b(e,s),f&&f.m(s,null),b(s,l),b(s,r),b(r,o),_&&_.m(o,null),b(o,a),D&&D.m(o,null),b(r,c),T&&T.m(r,null),b(r,u),b(r,p),U&&U.m(p,null),i[9](r),m=!0,k||($=[z(kt,"keydown",i[5]),z(t,"click",i[4])],k=!0)},p(I,[L]){I[0]?f?f.p(I,L):(f=Ae(I),f.c(),f.m(s,l)):f&&(f.d(1),f=null),I[2]?_?_.p(I,L):(_=Se(I),_.c(),_.m(o,a)):_&&(_.d(1),_=null),I[1]?D?D.p(I,L):(D=Ue(I),D.c(),D.m(o,null)):D&&(D.d(1),D=null),T&&T.p&&(!m||L&128)&&de(T,S,I,I[7],m?ye(S,I[7],L,null):me(I[7]),null),U&&U.p&&(!m||L&128)&&de(U,F,I,I[7],m?ye(F,I[7],L,vt):me(I[7]),qe)},i(I){m||(O(T,I),O(U,I),m=!0)},o(I){C(T,I),C(U,I),m=!1},d(I){I&&d(e),f&&f.d(),_&&_.d(),D&&D.d(),T&&T.d(I),U&&U.d(I),i[9](null),k=!1,Ze($)}}}function Tt(i,e,t){let{$$slots:n={},$$scope:s}=e,{globalCloseButton:l=!1}=e,{closeButton:r=!1}=e,{title:o=""}=e,{cancelable:a=!0}=e;const c=et(),u=()=>a&&c("close");let p;function m(f){f=f||window.event;var _=!1;if("key"in f?_=f.key==="Escape"||f.key==="Esc":_=f.keyCode===27,_){u();return}if(f.key==="Tab"){const D=p.querySelectorAll("*"),S=Array.from(D).filter(F=>F.tabIndex>=0);let T=-1;document.activeElement&&(T=S.indexOf(document.activeElement)),T===-1&&f.shiftKey&&(T=0),T+=S.length+(f.shiftKey?-1:1),T%=S.length,S[T].focus&&S[T].focus(),f.preventDefault()}}const k=typeof document!="undefined"&&document.activeElement;k&&tt(()=>{const f=k;f.focus&&f.focus()});function $(f){st[f?"unshift":"push"](()=>{p=f,t(3,p)})}return i.$$set=f=>{"globalCloseButton"in f&&t(0,l=f.globalCloseButton),"closeButton"in f&&t(1,r=f.closeButton),"title"in f&&t(2,o=f.title),"cancelable"in f&&t(6,a=f.cancelable),"$$scope"in f&&t(7,s=f.$$scope)},[l,r,o,p,u,m,a,s,n,$]}class be extends $e{constructor(e){super();Ie(this,e,Tt,wt,Ee,{globalCloseButton:0,closeButton:1,title:2,cancelable:6})}}const gt="rinkeby",$t="4",It={FootiumLiteFriendlies:{address:"0x9F03a183f1BE54401286e131764243F4F8C4934f",abi:[{inputs:[{internalType:"address",name:"vrfCoordinator",type:"address"},{internalType:"address",name:"link",type:"address"},{internalType:"contract FootiumLitePlayers",name:"_players",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"address",name:"accountA",type:"address"},{indexed:!1,internalType:"address",name:"accountB",type:"address"},{indexed:!1,internalType:"uint256[5]",name:"formationA",type:"uint256[5]"},{indexed:!1,internalType:"uint256[5]",name:"formationB",type:"uint256[5]"}],name:"MatchRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"requestId",type:"bytes32"}],name:"MatchRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"index",type:"uint256"},{indexed:!1,internalType:"uint256",name:"seed",type:"uint256"}],name:"MatchSeed",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256[5]",name:"formation",type:"uint256[5]"}],name:"TacticsSet",type:"event"},{inputs:[{internalType:"uint256[]",name:"formation",type:"uint256[]"}],name:"formationInvalid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"requestId",type:"bytes32"},{internalType:"uint256",name:"randomness",type:"uint256"}],name:"rawFulfillRandomness",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"accountB",type:"address"},{internalType:"uint256",name:"timestamp",type:"uint256"}],name:"registerMatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"requestSeed",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[5]",name:"formation",type:"uint256[5]"}],name:"setTactics",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"seed",type:"uint256"},{internalType:"uint256[]",name:"formationA",type:"uint256[]"},{internalType:"uint256[]",name:"formationB",type:"uint256[]"}],name:"simulateMatch",outputs:[{internalType:"enum FootiumLiteFriendlies.SimStatus",name:"",type:"uint8"}],stateMutability:"view",type:"function"}]},FootiumLitePlayers:{address:"0x832f7461Fd2FaBd90D6eCA465FbB9F4914DBFb6e",abi:[{inputs:[{internalType:"contract Svgs",name:"_svgs",type:"address"},{internalType:"string[]",name:"_firstNames",type:"string[]"},{internalType:"string[]",name:"_lastNames",type:"string[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"bool",name:"goalKeeper",type:"bool"},{indexed:!1,internalType:"uint256[7]",name:"traits",type:"uint256[7]"}],name:"PlayerSigned",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPlayerSvg",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getTraits",outputs:[{internalType:"uint256[7]",name:"",type:"uint256[7]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256[7]",name:"newTraits",type:"uint256[7]"}],name:"updateNumericTraits",outputs:[],stateMutability:"nonpayable",type:"function"}]},LinkTokenMock:{address:"0x293a1DBcc5654206fA747e666f46DCe174D3EA7f",abi:[{inputs:[{internalType:"address",name:"_account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"balanceOf_",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getRequestId",outputs:[{internalType:"bytes32",name:"requestId_",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"transferAndCall",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},Svgs:{address:"0x8d5Ad3C14AFf68cf121aEB316232771443834A84",abi:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes32",name:"_svgType",type:"bytes32"},{internalType:"uint256",name:"_id",type:"uint256"}],name:"getSvg",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_svg",type:"string"},{internalType:"bytes32",name:"_svgType",type:"bytes32"}],name:"storeSvg",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]},VRFCoordinatorMock:{address:"0x346eb487B62058108Cf0ed7d2638b8bD79F2713F",abi:[{inputs:[{internalType:"address",name:"linkAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!0,internalType:"bytes32",name:"keyHash",type:"bytes32"},{indexed:!0,internalType:"uint256",name:"seed",type:"uint256"}],name:"RandomnessRequest",type:"event"},{inputs:[],name:"LINK",outputs:[{internalType:"contract LinkTokenInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"requestId",type:"bytes32"},{internalType:"uint256",name:"randomness",type:"uint256"},{internalType:"address",name:"consumerContract",type:"address"}],name:"callBackWithRandomness",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"fee",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"nonpayable",type:"function"}]}};var Et={name:gt,chainId:$t,contracts:It};const xe=Me(Et,i=>{}),Fe=typeof performance!="undefined";let ce=Fe?(Date.now()-performance.now())/1e3:Date.now()/1e3;function ue(){return Fe?Math.floor(performance.now()/1e3)+ce:Math.floor(Date.now()/1e3)+ce}let Re=!1;function ke(i){const e=ue(),t=i-e;Math.abs(t)>Oe&&(ce+=t),Re=!0}function ve(){return Re}const Mt=Me(ue(),function(e){const t=setInterval(()=>{e(ue())},1e3);return function(){clearInterval(t)}});typeof window!="undefined"&&(window.time={now:ue,startTime:ce,correctTime:ke,isCorrected:ve,time:Mt});const ie=Pe("chainTempo");function Pt(i,e){for(let t=i.length-1;t>=0;t--)if(i[t]===e){i.splice(t,1);return}ie.log("NOT FOUND")}class Bt{constructor(e){this.maxTimeout=e,this.blockListeners=[],this.currentProvider=void 0,this.lastUpdate=0,this.chainInfo={lastBlockNumber:void 0,stale:!0}}subscribe(e){return e(this.chainInfo),this.blockListeners.push(e),Pt.bind(null,this.blockListeners,e)}check(){const e=Date.now()/1e3;e-this.lastUpdate>this.maxTimeout-1&&(ie.info(`timed out... ${e}  - ${this.lastUpdate} = ${e-this.lastUpdate} > ${this.maxTimeout-1}`),this.onBlock(void 0)),this.timeout=setTimeout(this.check.bind(this),this.maxTimeout*1e3)}startOrUpdateProvider(e){this.currentProvider!==e&&(this.currentProvider&&(ie.info("stop listening for block event"),this.currentProvider.off("block",this.callback)),this.callback=this.onBlock.bind(this),this.currentProvider=e,this.currentProvider&&(ie.info("listening for block event"),this.currentProvider.on("block",this.callback))),this.timeout||(this.timeout=setTimeout(this.check.bind(this),this.maxTimeout*1e3))}onBlock(e){e?(this.chainInfo.lastBlockNumber=e,this.chainInfo.stale=!1):this.chainInfo.stale=!0,this.lastUpdate=Date.now()/1e3,this.triggerListeners()}triggerListeners(){this.triggerTimeout&&clearTimeout(this.triggerTimeout),this.triggerTimeout=setTimeout(this.callListeners.bind(this),0)}callListeners(){ie.info(`onBlock ${this.chainInfo.lastBlockNumber}`);for(const e of this.blockListeners)e(this.chainInfo)}}const Ve=new Bt(Oe*6),We=it({chainConfigs:at(xe),builtin:{autoProbe:!0},transactions:{autoDelete:!1,finality:ht},flow:{autoUnlock:!0},autoSelectPrevious:!0,localStoragePrefix:J&&J.startsWith("/ipfs/")||J.startsWith("/ipns/")?J.slice(6):void 0,options:["builtin",new rt({nodeUrl:typeof ne=="string"?ne:void 0,chainId:Ce,infuraId:"bc0bdd4eaac640278cdebc3aa91fabe4"})],fallbackNode:ne,checkGenesis:_t}),{wallet:K,transactions:fe,builtin:Dt,chain:Z,balance:Ln,flow:ae,fallback:je}=We;function Ot(i){Ne.queue({id:i.hash,delay:0,title:"Transaction Error",text:"The Transaction failed",type:"error",onAcknowledge:()=>fe.acknowledge(i.hash,"failure")})}function Ct(i){Ne.queue({id:i.hash,delay:3,title:"Transaction Cancelled",text:"The Transaction Has Been Replaced",type:"info",onAcknowledge:()=>fe.acknowledge(i.hash,"cancelled")})}fe.subscribe(i=>{for(const e of i.concat())e.confirmations>0&&!e.acknowledged&&(e.status==="failure"?Ot(e):e.status==="cancelled"?Ct(e):fe.acknowledge(e.hash,e.status))});Z.subscribe(async i=>{var e;if(Ve.startOrUpdateProvider(K.provider),!ve()&&(i.state==="Connected"||i.state==="Ready")){const t=await((e=K.provider)==null?void 0:e.getBlock("latest"));t&&ke(t.timestamp)}});je.subscribe(async i=>{var e;if(!ve()&&(i.state==="Connected"||i.state==="Ready")){const t=await((e=K.provider)==null?void 0:e.getBlock("latest"));t&&ke(t.timestamp)}});let Ke;K.subscribe(async i=>{Ke!==i.address&&(Ke=i.address,lt({address:i.address}))});typeof window!="undefined"&&(window.walletStores=We);Ve.startOrUpdateProvider(K.provider);xe.subscribe(async i=>{await Z.updateContracts(i)});function He(i,e,t){const n=i.slice();return n[21]=e[t],n}function Lt(i){let e,t,n,s,l,r,o;return{c(){e=P("div"),t=P("p"),n=v("chain reset detected! Metamask need to have its account reset! "),s=P("button"),l=v("OK"),this.h()},l(a){e=B(a,"DIV",{class:!0,style:!0});var c=E(e);t=B(c,"P",{class:!0});var u=E(t);n=w(u,"chain reset detected! Metamask need to have its account reset! "),s=B(u,"BUTTON",{class:!0});var p=E(s);l=w(p,"OK"),p.forEach(d),u.forEach(d),c.forEach(d),this.h()},h(){h(s,"class","border-2 border-white p-2"),h(t,"class","w-64 text-center rounded-bl-xl rounded-br-xl text-gray-200 bg-red-500 p-1"),h(e,"class","w-full flex items-center justify-center fixed top-0"),Be(e,"z-index","5")},m(a,c){y(a,e,c),b(e,t),b(t,n),b(t,s),b(s,l),r||(o=z(s,"click",i[8]),r=!0)},p:g,d(a){a&&d(e),r=!1,o()}}}function Nt(i){let e,t,n,s,l,r,o,a,c;return{c(){e=P("div"),t=P("p"),n=v(`Wrong network, switch to
      `),s=v(se),l=N(),r=P("button"),o=v("OK"),this.h()},l(u){e=B(u,"DIV",{class:!0,style:!0});var p=E(e);t=B(p,"P",{class:!0});var m=E(t);n=w(m,`Wrong network, switch to
      `),s=w(m,se),l=q(m),r=B(m,"BUTTON",{class:!0});var k=E(r);o=w(k,"OK"),k.forEach(d),m.forEach(d),p.forEach(d),this.h()},h(){h(r,"class","border-2 border-white p-2"),h(t,"class","w-64 text-center rounded-bl-xl rounded-br-xl text-gray-200 bg-pink-600 p-1"),h(e,"class","w-full flex items-center justify-center fixed top-0"),Be(e,"z-index","5")},m(u,p){y(u,e,p),b(e,t),b(t,n),b(t,s),b(t,l),b(t,r),b(r,o),a||(c=z(r,"click",i[9]),a=!0)},p:g,d(u){u&&d(e),a=!1,c()}}}function qt(i){return{c:g,l:g,m:g,p:g,d:g}}function At(i){return{c:g,l:g,m:g,p:g,d:g}}function St(i){let e,t;return e=new be({props:{title:i[0],cancelable:!i[1].connecting,closeButton:!1,$$slots:{default:[hn]},$$scope:{ctx:i}}}),e.$on("close",i[19]),{c(){R(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const l={};s&1&&(l.title=n[0]),s&2&&(l.cancelable=!n[1].connecting),s&1048698&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function Ut(i){let e,t;return e=new be({props:{title:"An Error Happened",$$slots:{default:[_n]},$$scope:{ctx:i}}}),e.$on("close",i[13]),{c(){R(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const l={};s&1048640&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function xt(i){let e,t;return e=new be({props:{title:"An Error Happened",$$slots:{default:[bn]},$$scope:{ctx:i}}}),e.$on("close",i[12]),{c(){R(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const l={};s&1048578&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function Ft(i){let e,t,n,s=i[1].state+"",l,r,o,a;return o=new X({props:{class:"mt-4",label:"Cancel",$$slots:{default:[zt]},$$scope:{ctx:i}}}),o.$on("click",i[18]),{c(){e=P("div"),t=P("p"),n=v("Flow aborted "),l=v(s),r=N(),R(o.$$.fragment),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=E(e);t=B(u,"P",{});var p=E(t);n=w(p,"Flow aborted "),l=w(p,s),p.forEach(d),r=q(u),V(o.$$.fragment,u),u.forEach(d),this.h()},h(){h(e,"class","text-center")},m(c,u){y(c,e,u),b(e,t),b(t,n),b(t,l),b(e,r),W(o,e,null),a=!0},p(c,u){(!a||u&2)&&s!==(s=c[1].state+"")&&H(l,s);const p={};u&1048576&&(p.$$scope={dirty:u,ctx:c}),o.$set(p)},i(c){a||(O(o.$$.fragment,c),a=!0)},o(c){C(o.$$.fragment,c),a=!1},d(c){c&&d(e),j(o)}}}function Rt(i){let e;return{c(){e=v("Please wait...")},l(t){e=w(t,"Please wait...")},m(t,n){y(t,e,n)},p:g,i:g,o:g,d(t){t&&d(e)}}}function Vt(i){let e;function t(l,r){return l[1].pendingUserConfirmation[0]==="transaction"?Jt:l[1].pendingUserConfirmation[0]==="signature"?Qt:Yt}let n=t(i),s=n(i);return{c(){s.c(),e=A()},l(l){s.l(l),e=A()},m(l,r){s.m(l,r),y(l,e,r)},p(l,r){n!==(n=t(l))&&(s.d(1),s=n(l),s&&(s.c(),s.m(e.parentNode,e)))},i:g,o:g,d(l){s.d(l),l&&d(e)}}}function Wt(i){let e,t,n,s,l;function r(c,u){return c[5].code===4001?en:c[5].message?Zt:Xt}let o=r(i),a=o(i);return s=new X({props:{class:"mt-4",label:"Retry",$$slots:{default:[tn]},$$scope:{ctx:i}}}),s.$on("click",i[17]),{c(){e=P("div"),t=P("p"),a.c(),n=N(),R(s.$$.fragment),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=E(e);t=B(u,"P",{});var p=E(t);a.l(p),p.forEach(d),n=q(u),V(s.$$.fragment,u),u.forEach(d),this.h()},h(){h(e,"class","text-center")},m(c,u){y(c,e,u),b(e,t),a.m(t,null),b(e,n),W(s,e,null),l=!0},p(c,u){o===(o=r(c))&&a?a.p(c,u):(a.d(1),a=o(c),a&&(a.c(),a.m(t,null)));const p={};u&1048576&&(p.$$scope={dirty:u,ctx:c}),s.$set(p)},i(c){l||(O(s.$$.fragment,c),l=!0)},o(c){C(s.$$.fragment,c),l=!1},d(c){c&&d(e),a.d(),j(s)}}}function jt(i){let e,t,n,s;const l=[sn,nn],r=[];function o(a,c){return a[6].loadingData?0:a[6].notSupported?1:-1}return~(e=o(i))&&(t=r[e]=l[e](i)),{c(){t&&t.c(),n=A()},l(a){t&&t.l(a),n=A()},m(a,c){~e&&r[e].m(a,c),y(a,n,c),s=!0},p(a,c){let u=e;e=o(a),e===u?~e&&r[e].p(a,c):(t&&(Y(),C(r[u],1,1,()=>{r[u]=null}),Q()),~e?(t=r[e],t?t.p(a,c):(t=r[e]=l[e](a),t.c()),O(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(O(t),s=!0)},o(a){C(t),s=!1},d(a){~e&&r[e].d(a),a&&d(n)}}}function Kt(i){let e,t,n,s;const l=[ln,rn],r=[];function o(a,c){return a[6].connecting?0:a[6].error?1:-1}return~(e=o(i))&&(t=r[e]=l[e](i)),{c(){t&&t.c(),n=A()},l(a){t&&t.l(a),n=A()},m(a,c){~e&&r[e].m(a,c),y(a,n,c),s=!0},p(a,c){let u=e;e=o(a),e===u?~e&&r[e].p(a,c):(t&&(Y(),C(r[u],1,1,()=>{r[u]=null}),Q()),~e?(t=r[e],t?t.p(a,c):(t=r[e]=l[e](a),t.c()),O(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(O(t),s=!0)},o(a){C(t),s=!1},d(a){~e&&r[e].d(a),a&&d(n)}}}function Ht(i){let e,t,n,s;const l=[un,cn],r=[];function o(a,c){return a[1].unlocking?0:1}return e=o(i),t=r[e]=l[e](i),{c(){t.c(),n=A()},l(a){t.l(a),n=A()},m(a,c){r[e].m(a,c),y(a,n,c),s=!0},p(a,c){let u=e;e=o(a),e===u?r[e].p(a,c):(Y(),C(r[u],1,1,()=>{r[u]=null}),Q(),t=r[e],t?t.p(a,c):(t=r[e]=l[e](a),t.c()),O(t,1),t.m(n.parentNode,n))},i(a){s||(O(t),s=!0)},o(a){C(t),s=!1},d(a){r[e].d(a),a&&d(n)}}}function Gt(i){let e,t,n,s;const l=[mn,dn,pn],r=[];function o(a,c){return a[1].loadingModule?0:a[1].connecting?1:2}return e=o(i),t=r[e]=l[e](i),{c(){t.c(),n=A()},l(a){t.l(a),n=A()},m(a,c){r[e].m(a,c),y(a,n,c),s=!0},p(a,c){let u=e;e=o(a),e===u?r[e].p(a,c):(Y(),C(r[u],1,1,()=>{r[u]=null}),Q(),t=r[e],t?t.p(a,c):(t=r[e]=l[e](a),t.c()),O(t,1),t.m(n.parentNode,n))},i(a){s||(O(t),s=!0)},o(a){C(t),s=!1},d(a){r[e].d(a),a&&d(n)}}}function zt(i){let e;return{c(){e=v("OK")},l(t){e=w(t,"OK")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function Yt(i){let e;return{c(){e=v("Please accept request...")},l(t){e=w(t,"Please accept request...")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function Qt(i){let e;return{c(){e=v("Please accept signature...")},l(t){e=w(t,"Please accept signature...")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function Jt(i){let e;return{c(){e=v("Please accept transaction...")},l(t){e=w(t,"Please accept transaction...")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function Xt(i){let e,t;return{c(){e=v("Error: "),t=v(i[5])},l(n){e=w(n,"Error: "),t=w(n,i[5])},m(n,s){y(n,e,s),y(n,t,s)},p(n,s){s&32&&H(t,n[5])},d(n){n&&d(e),n&&d(t)}}}function Zt(i){let e=i[5].message+"",t;return{c(){t=v(e)},l(n){t=w(n,e)},m(n,s){y(n,t,s)},p(n,s){s&32&&e!==(e=n[5].message+"")&&H(t,e)},d(n){n&&d(t)}}}function en(i){let e;return{c(){e=v("You rejected the request")},l(t){e=w(t,"You rejected the request")},m(t,n){y(t,e,n)},p:g,d(t){t&&d(e)}}}function tn(i){let e;return{c(){e=v("Retry")},l(t){e=w(t,"Retry")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function nn(i){let e,t,n,s,l;return s=new X({props:{label:"Unlock Wallet",$$slots:{default:[an]},$$scope:{ctx:i}}}),s.$on("click",i[9]),{c(){e=v(`Please switch to
        `),t=v(se),n=N(),R(s.$$.fragment)},l(r){e=w(r,`Please switch to
        `),t=w(r,se),n=q(r),V(s.$$.fragment,r)},m(r,o){y(r,e,o),y(r,t,o),y(r,n,o),W(s,r,o),l=!0},p(r,o){const a={};o&1048576&&(a.$$scope={dirty:o,ctx:r}),s.$set(a)},i(r){l||(O(s.$$.fragment,r),l=!0)},o(r){C(s.$$.fragment,r),l=!1},d(r){r&&d(e),r&&d(t),r&&d(n),j(s,r)}}}function sn(i){let e;return{c(){e=v("Loading contracts...")},l(t){e=w(t,"Loading contracts...")},m(t,n){y(t,e,n)},p:g,i:g,o:g,d(t){t&&d(e)}}}function an(i){let e;return{c(){e=v("Switch")},l(t){e=w(t,"Switch")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function rn(i){var a;let e,t,n=(((a=i[6].error)==null?void 0:a.message)||""+i[6].error)+"",s,l,r,o;return r=new X({props:{class:"mt-4",label:"OK",$$slots:{default:[on]},$$scope:{ctx:i}}}),r.$on("click",i[16]),{c(){e=P("div"),t=P("p"),s=v(n),l=N(),R(r.$$.fragment),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=E(e);t=B(u,"P",{});var p=E(t);s=w(p,n),p.forEach(d),l=q(u),V(r.$$.fragment,u),u.forEach(d),this.h()},h(){h(e,"class","text-center")},m(c,u){y(c,e,u),b(e,t),b(t,s),b(e,l),W(r,e,null),o=!0},p(c,u){var m;(!o||u&64)&&n!==(n=(((m=c[6].error)==null?void 0:m.message)||""+c[6].error)+"")&&H(s,n);const p={};u&1048576&&(p.$$scope={dirty:u,ctx:c}),r.$set(p)},i(c){o||(O(r.$$.fragment,c),o=!0)},o(c){C(r.$$.fragment,c),o=!1},d(c){c&&d(e),j(r)}}}function ln(i){let e;return{c(){e=v("Connecting...")},l(t){e=w(t,"Connecting...")},m(t,n){y(t,e,n)},p:g,i:g,o:g,d(t){t&&d(e)}}}function on(i){let e;return{c(){e=v("OK")},l(t){e=w(t,"OK")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function cn(i){let e,t;return e=new X({props:{label:"Unlock Wallet",$$slots:{default:[fn]},$$scope:{ctx:i}}}),e.$on("click",i[15]),{c(){R(e.$$.fragment)},l(n){V(e.$$.fragment,n)},m(n,s){W(e,n,s),t=!0},p(n,s){const l={};s&1048576&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(O(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function un(i){let e;return{c(){e=v("Please accept the application to access your wallet.")},l(t){e=w(t,"Please accept the application to access your wallet.")},m(t,n){y(t,e,n)},p:g,i:g,o:g,d(t){t&&d(e)}}}function fn(i){let e;return{c(){e=v("Unlock")},l(t){e=w(t,"Unlock")},m(t,n){y(t,e,n)},d(t){t&&d(e)}}}function pn(i){let e,t,n,s,l,r,o,a,c=i[3],u=[];for(let m=0;m<c.length;m+=1)u[m]=Ge(He(i,c,m));let p=i[4]&&ze(i);return{c(){e=P("div"),t=P("p"),n=v("You need to connect your wallet."),s=N(),l=P("div");for(let m=0;m<u.length;m+=1)u[m].c();r=N(),p&&p.c(),o=A(),this.h()},l(m){e=B(m,"DIV",{class:!0});var k=E(e);t=B(k,"P",{});var $=E(t);n=w($,"You need to connect your wallet."),$.forEach(d),k.forEach(d),s=q(m),l=B(m,"DIV",{class:!0});var f=E(l);for(let _=0;_<u.length;_+=1)u[_].l(f);f.forEach(d),r=q(m),p&&p.l(m),o=A(),this.h()},h(){h(e,"class","text-center"),h(l,"class","flex flex-wrap justify-center pb-3")},m(m,k){y(m,e,k),b(e,t),b(t,n),y(m,s,k),y(m,l,k);for(let $=0;$<u.length;$+=1)u[$].m(l,null);y(m,r,k),p&&p.m(m,k),y(m,o,k),a=!0},p(m,k){if(k&8){c=m[3];let $;for($=0;$<c.length;$+=1){const f=He(m,c,$);u[$]?u[$].p(f,k):(u[$]=Ge(f),u[$].c(),u[$].m(l,null))}for(;$<u.length;$+=1)u[$].d(1);u.length=c.length}m[4]?p?(p.p(m,k),k&16&&O(p,1)):(p=ze(m),p.c(),O(p,1),p.m(o.parentNode,o)):p&&(Y(),C(p,1,1,()=>{p=null}),Q())},i(m){a||(O(p),a=!0)},o(m){C(p),a=!1},d(m){m&&d(e),m&&d(s),m&&d(l),ot(u,m),m&&d(r),p&&p.d(m),m&&d(o)}}}function dn(i){let e;return{c(){e=v("Connecting to wallet...")},l(t){e=w(t,"Connecting to wallet...")},m(t,n){y(t,e,n)},p:g,i:g,o:g,d(t){t&&d(e)}}}function mn(i){let e,t=i[1].selected+"",n;return{c(){e=v(`Loading module:
        `),n=v(t)},l(s){e=w(s,`Loading module:
        `),n=w(s,t)},m(s,l){y(s,e,l),y(s,n,l)},p(s,l){l&2&&t!==(t=s[1].selected+"")&&H(n,t)},i:g,o:g,d(s){s&&d(e),s&&d(n)}}}function Ge(i){let e,t,n,s,l;function r(){return i[14](i[21])}return{c(){e=P("img"),this.h()},l(o){e=B(o,"IMG",{class:!0,alt:!0,src:!0}),this.h()},h(){h(e,"class","cursor-pointer p-2 m-2 border-2 h-12 w-12 object-contain"),h(e,"alt",t=`Login with ${i[21].name}`),he(e.src,n=`${J}/${i[21].img}`)||h(e,"src",n)},m(o,a){y(o,e,a),s||(l=z(e,"click",r),s=!0)},p(o,a){i=o,a&8&&t!==(t=`Login with ${i[21].name}`)&&h(e,"alt",t),a&8&&!he(e.src,n=`${J}/${i[21].img}`)&&h(e,"src",n)},d(o){o&&d(e),s=!1,l()}}}function ze(i){let e,t,n,s,l,r;return l=new X({props:{label:"Download Metamask",blank:!0,href:"https://metamask.io/download.html",class:"m-4 w-max-content",$$slots:{default:[yn]},$$scope:{ctx:i}}}),{c(){e=P("div"),t=v("OR"),n=N(),s=P("div"),R(l.$$.fragment),this.h()},l(o){e=B(o,"DIV",{class:!0});var a=E(e);t=w(a,"OR"),a.forEach(d),n=q(o),s=B(o,"DIV",{class:!0});var c=E(s);V(l.$$.fragment,c),c.forEach(d),this.h()},h(){h(e,"class","text-center"),h(s,"class","flex justify-center")},m(o,a){y(o,e,a),b(e,t),y(o,n,a),y(o,s,a),W(l,s,null),r=!0},p(o,a){const c={};a&1048576&&(c.$$scope={dirty:a,ctx:o}),l.$set(c)},i(o){r||(O(l.$$.fragment,o),r=!0)},o(o){C(l.$$.fragment,o),r=!1},d(o){o&&d(e),o&&d(n),o&&d(s),j(l)}}}function yn(i){let e,t,n;return{c(){e=P("img"),n=v(`
              Download metamask`),this.h()},l(s){e=B(s,"IMG",{class:!0,alt:!0,src:!0}),n=w(s,`
              Download metamask`),this.h()},h(){h(e,"class","cursor-pointer p-0 mx-2 h-10 w-10 object-contain"),h(e,"alt","Download Metamask}"),he(e.src,t=`${J}/images/metamask.svg`)||h(e,"src",t)},m(s,l){y(s,e,l),y(s,n,l)},p:g,d(s){s&&d(e),s&&d(n)}}}function hn(i){let e,t,n,s;const l=[Gt,Ht,Kt,jt,Wt,Vt,Rt,Ft],r=[];function o(a,c){return a[1].state==="Idle"?0:a[1].state==="Locked"?1:a[6].state==="Idle"?2:a[6].state==="Connected"?3:a[5]?4:a[1].pendingUserConfirmation?5:a[1].state==="Ready"?6:7}return e=o(i),t=r[e]=l[e](i),{c(){t.c(),n=A()},l(a){t.l(a),n=A()},m(a,c){r[e].m(a,c),y(a,n,c),s=!0},p(a,c){let u=e;e=o(a),e===u?r[e].p(a,c):(Y(),C(r[u],1,1,()=>{r[u]=null}),Q(),t=r[e],t?t.p(a,c):(t=r[e]=l[e](a),t.c()),O(t,1),t.m(n.parentNode,n))},i(a){s||(O(t),s=!0)},o(a){C(t),s=!1},d(a){r[e].d(a),a&&d(n)}}}function _n(i){let e,t=i[6].error.message+"",n;return{c(){e=P("p"),n=v(t),this.h()},l(s){e=B(s,"P",{class:!0});var l=E(e);n=w(l,t),l.forEach(d),this.h()},h(){h(e,"class","w-64 text-center text-red-500 p-1")},m(s,l){y(s,e,l),b(e,n)},p(s,l){l&64&&t!==(t=s[6].error.message+"")&&H(n,t)},d(s){s&&d(e)}}}function bn(i){let e,t=i[1].error.message+"",n;return{c(){e=P("p"),n=v(t),this.h()},l(s){e=B(s,"P",{class:!0});var l=E(e);n=w(l,t),l.forEach(d),this.h()},h(){h(e,"class","w-64 text-center text-red-500 p-1")},m(s,l){y(s,e,l),b(e,n)},p(s,l){l&2&&t!==(t=s[1].error.message+"")&&H(n,t)},d(s){s&&d(e)}}}function kn(i){let e,t,n,s,l,r;const o=i[11].default,a=pe(o,i,i[20],null);function c(f,_){if(f[6].state==="Idle"&&!f[6].connecting&&f[7].state==="Idle"&&!f[7].connecting)return At;if(f[6].state==="Idle"&&!f[6].connecting&&f[7].error)return qt;if(f[6].notSupported)return Nt;if(f[6].genesisChanged)return Lt}let u=c(i),p=u&&u(i);const m=[xt,Ut,St],k=[];function $(f,_){return f[1].error?0:f[6].error?1:f[2].inProgress?2:-1}return~(n=$(i))&&(s=k[n]=m[n](i)),{c(){a&&a.c(),e=N(),p&&p.c(),t=N(),s&&s.c(),l=A()},l(f){a&&a.l(f),e=q(f),p&&p.l(f),t=q(f),s&&s.l(f),l=A()},m(f,_){a&&a.m(f,_),y(f,e,_),p&&p.m(f,_),y(f,t,_),~n&&k[n].m(f,_),y(f,l,_),r=!0},p(f,[_]){a&&a.p&&(!r||_&1048576)&&de(a,o,f,f[20],r?ye(o,f[20],_,null):me(f[20]),null),u===(u=c(f))&&p?p.p(f,_):(p&&p.d(1),p=u&&u(f),p&&(p.c(),p.m(t.parentNode,t)));let D=n;n=$(f),n===D?~n&&k[n].p(f,_):(s&&(Y(),C(k[D],1,1,()=>{k[D]=null}),Q()),~n?(s=k[n],s?s.p(f,_):(s=k[n]=m[n](f),s.c()),O(s,1),s.m(l.parentNode,l)):s=null)},i(f){r||(O(a,f),O(s),r=!0)},o(f){C(a,f),C(s),r=!1},d(f){a&&a.d(f),f&&d(e),p&&p.d(f),f&&d(t),~n&&k[n].d(f),f&&d(l)}}}function vn(i,e,t){let n,s,l,r,o,a,c;te(i,Dt,M=>t(10,l=M)),te(i,K,M=>t(1,r=M)),te(i,ae,M=>t(2,o=M)),te(i,Z,M=>t(6,a=M)),te(i,je,M=>t(7,c=M));let{$$slots:u={},$$scope:p}=e,{title:m=""}=e,k=[];function $(){Z.acknowledgeNewGenesisHash()}async function f(){let M;const x=[];Le&&x.push(Le),ne&&x.push(ne),await Z.switchChain(Ce,{chainName:se,rpcUrls:x,blockExplorerUrls:M})}const _=()=>K.acknowledgeError(),D=()=>Z.acknowledgeError(),S=M=>K.connect(M.id),T=()=>K.unlock(),F=()=>ae.cancel(),U=()=>ae.retry(),I=()=>ae.cancel(),L=()=>ae.cancel();return i.$$set=M=>{"title"in M&&t(0,m=M.title),"$$scope"in M&&t(20,p=M.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&t(5,n=o.executionError),i.$$.dirty&1026&&t(4,s=r.options.filter(M=>M==="builtin"&&!l.available).length>0),i.$$.dirty&1026&&t(3,k=r.options.filter(M=>M!=="builtin"||l.available).map(M=>({img:(x=>{if(x==="builtin"){if(l.state==="Ready"){if(l.vendor==="Metamask")return"images/metamask.svg";if(l.vendor==="Opera")return"images/opera.svg"}return"images/web3-default.png"}else return x.startsWith("torus-")?`images/torus/${x.slice(6)}.svg`:`images/${x}.svg`})(M),id:M,name:M})))},[m,r,o,k,s,n,a,c,$,f,l,u,_,D,S,T,F,U,I,L,p]}class Nn extends $e{constructor(e){super();Ie(this,e,vn,kn,Ee,{title:0})}}const wn={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0},Tn=ct.concat();class gn{constructor(e){e?this.client=new ut({url:e,exchanges:Tn}):console.error("need an url for graphql queries")}mutate(e,t){return this.client.mutation(e,t==null?void 0:t.variables,t==null?void 0:t.context).toPromise()}query(e,t){return this.client.query(e,t==null?void 0:t.variables,t==null?void 0:t.context).toPromise()}async queryList(e,t){const n=t.path.split("."),s=100;let l="0x0",r=s,o=[];for(;r===s;){const a=await this.client.query(e,G({first:s,lastId:l},t==null?void 0:t.variables),t==null?void 0:t.context).toPromise();if(a.error)throw new Error(a.error.message);const c=a.data;let u=[];if(c&&t.path){let p=c;for(const m of n)p=p[m];u=p}if(r=u.length,r>0){const p=(t==null?void 0:t.getLastId)!==void 0?t==null?void 0:t.getLastId(o):u[r-1].id;if(l===p){console.log("same query, stop");break}l=p}o=o.concat(u)}return o}subscribeToQuery(e,t){const n=_e(ft([De({fetching:!0,stale:!1}),_e(this.client.query(e,t==null?void 0:t.variables,t==null?void 0:t.context),pt(({stale:s,data:l,error:r,extensions:o})=>({fetching:!1,stale:!!s,data:l,error:r,extensions:o}))),De({fetching:!1,stale:!1})]),dt((s,l)=>G(G({},s),l),wn));return{subscribe(s){return _e(n,mt(s)).unsubscribe}}}}const qn=new gn(bt);function Ye(i,e){for(const t of Object.keys(e))i[t]&&typeof i[t]=="object"&&typeof e[t]=="object"?Ye(i[t],e[t]):i[t]=e[t]}class $n{constructor(e){this.$store=e,this.store=yt(this.$store)}subscribe(e,t){return this.store.subscribe(e,t)}setPartial(e){this.$store||(this.$store={});for(const t of Object.keys(e))this.$store[t]=e[t];return this.store.set(this.$store),this.$store}set(e){if(this.$store||(this.$store={}),e||(this.$store=e),e!==this.$store){for(const t of Object.keys(this.$store))e[t]===void 0&&(this.$store[t]=void 0);for(const t of Object.keys(e))this.$store[t]=e[t]}return this.store.set(this.$store),this.$store}}class In extends $n{constructor(e){super(e)}setData(e,t){return this.$store.data=this.$store.data||{},Ye(this.$store.data,e),t&&this.setPartial(t),this.store.set(this.$store),this.$store}}const re=Pe("graphql");class En extends In{constructor(e,t,n){super({step:"IDLE"});this.endpoint=e,this.query=t,this.options=n,this.runtimeVariables={}}acknowledgeError(){this.setPartial({error:void 0})}async fetch(e){var o,a,c,u,p,m,k;re.info("fetching....");const t=typeof((a=(o=this.options)==null?void 0:o.variables)==null?void 0:a.first)=="number"?(u=(c=this.options)==null?void 0:c.variables)==null?void 0:u.first:1e3;let n=t,s="0x0",l,r;for(;n===t;)try{const $=G(G(G({first:t,lastId:s},(p=this.options)==null?void 0:p.variables),this.runtimeVariables),e),f=this.query.split("?");let _="";for(let T=0;T<f.length;T++){const F=f[T];F.startsWith("$")?$[F.substr(1)]||T++:_+=F}const D=await this.endpoint.query(_,{variables:$,context:{requestPolicy:"cache-and-network"}});if(!D.data)throw this.setPartial({error:"cannot fetch from thegraph node"}),new Error("cannot fetch from thegraph node");const S=((m=this.options)==null?void 0:m.path)?D.data[this.options.path]:D.data;if(l||(l=S),(k=this.options)==null?void 0:k.list){let T=S;if(typeof this.options.list!="boolean"&&this.options.list.path&&(T=S[this.options.list.path]),n=T.length,n>0){const F=typeof this.options.list!="boolean"&&this.options.list.getLastId!==void 0?this.options.list.getLastId(T):T[n-1].id;if(s===F){re.log("same query, stop");break}s=F}r?r.push(...T):r=T}else n=0}catch($){n=0,re.error($)}this.setPartial({data:l,step:"READY"})}}class An extends En{constructor(e,t,n,s){super(e,t,s);this.listenerCount=0,this.hook=n}acknowledgeError(){this.setPartial({error:void 0})}subscribe(e,t){this.listenerCount++,this.listenerCount===1&&(re.info("start fetching"),this.stopUpdates=this.hook.subscribe(s=>this.fetch({blockNumber:s.lastBlockNumber})));const n=this.store.subscribe(e,t);return()=>{this.listenerCount--,this.listenerCount===0&&(re.info("stop fetching"),this.stopUpdates&&(this.stopUpdates(),this.stopUpdates=void 0)),n()}}}export{An as H,qn as S,Nn as W,Ve as c,ae as f,fe as t,K as w};
//# sourceMappingURL=graphql-1e73ec8c.js.map
